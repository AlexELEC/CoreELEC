From 496ee7ac49a732b051fe0f717a946b0a35f90737 Mon Sep 17 00:00:00 2001
From: Christian Hewitt <christianshewitt@gmail.com>
Date: Sat, 23 Mar 2024 09:15:55 +0000
Subject: [PATCH] os_dep: update os_intfs.c/usb_intf.c for kernel 6.8

Signed-off-by: Christian Hewitt <christianshewitt@gmail.com>
---
 os_dep/os_intfs.c | 4 ++++
 os_dep/usb_intf.c | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/os_dep/os_intfs.c b/os_dep/os_intfs.c
index 5feaaf4..1831d6c 100644
--- a/os_dep/os_intfs.c
+++ b/os_dep/os_intfs.c
@@ -35,6 +35,10 @@
 #include <rtw_br_ext.h>
 #endif //CONFIG_BR_EXT
 
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(6, 8, 0))
+#define strlcpy strscpy
+#endif
+
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("Realtek Wireless Lan Driver");
 MODULE_AUTHOR("Realtek Semiconductor Corp.");
diff --git a/os_dep/usb_intf.c b/os_dep/usb_intf.c
index a2353e3..2961a81 100644
--- a/os_dep/usb_intf.c
+++ b/os_dep/usb_intf.c
@@ -148,7 +148,7 @@ struct rtw_usb_drv rtl8192d_usb_drv = {
 	.usbdrv.supports_autosuspend = 1,
 	#endif
 
-	#if (LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 19))
+	#if (LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 19)) && (LINUX_VERSION_CODE < KERNEL_VERSION(6, 8, 0))
 	.usbdrv.drvwrap.driver.shutdown = rtw_dev_shutdown,
 	#else
 	.usbdrv.driver.shutdown = rtw_dev_shutdown,
-- 
2.34.1

