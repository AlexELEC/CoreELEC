From 2e9f235766724666f61f04ebc323c7ab1543b194 Mon Sep 17 00:00:00 2001
From: Portisch <hugo.portisch@yahoo.de>
Date: Tue, 1 Apr 2025 18:28:56 +0200
Subject: [PATCH] fix physical address auto detection Caused by
 https://github.com/Pulse-Eight/libcec/commit/05fc6d01e6e3f01164f3e844f88ece4bf19e16c9

---
 src/libcec/CECClient.cpp | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
index b38fab3..4bf704e 100644
--- a/src/libcec/CECClient.cpp
+++ b/src/libcec/CECClient.cpp
@@ -214,7 +214,12 @@ bool CCECClient::SetHDMIPort(const cec_logical_address iBaseDevice, const uint8_
     }
   }
 
-  return SetPhysicalAddress(iPhysicalAddress);
+  // and set the address
+  SetDevicePhysicalAddress(iPhysicalAddress);
+
+  QueueConfigurationChanged(m_configuration);
+
+  return bReturn;
 }
 
 void CCECClient::ResetPhysicalAddress(void)
@@ -269,11 +274,6 @@ bool CCECClient::SetPhysicalAddress(const libcec_configuration &configuration)
 
 bool CCECClient::SetPhysicalAddress(const uint16_t iPhysicalAddress)
 {
-  if (m_configuration.iPhysicalAddress == iPhysicalAddress)
-  {
-    return true;
-  }
-
   // update the configuration
   {
     CLockObject lock(m_mutex);
-- 
2.34.1

